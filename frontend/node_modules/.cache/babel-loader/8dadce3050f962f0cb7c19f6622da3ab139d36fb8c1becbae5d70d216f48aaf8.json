{"ast":null,"code":"var _jsxFileName = \"D:\\\\Rei\\\\Reis11\\\\CursoWebIntegrador\\\\frontend\\\\src\\\\components\\\\ProductForm.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\n// 1. Importar los componentes de Material-UI\nimport Alert from '@mui/material/Alert';\nimport CheckIcon from '@mui/icons-material/Check';\nimport { saveProduct, updateProduct } from \"../services/productService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst vacio = {\n  name: \"\",\n  price: \"\",\n  stock: \"\",\n  categoryId: \"\"\n};\nexport default function ProductForm({\n  productoEditar,\n  onGuardado\n}) {\n  _s();\n  const [producto, setProducto] = useState(vacio);\n  // 2. Estado para controlar la alerta (mensaje y tipo)\n  const [alerta, setAlerta] = useState({\n    visible: false,\n    message: '',\n    severity: 'success'\n  });\n  useEffect(() => {\n    if (productoEditar) setProducto(productoEditar);else setProducto(vacio);\n    // Ocultar alerta al cambiar de producto\n    setAlerta({\n      visible: false,\n      message: '',\n      severity: 'success'\n    });\n  }, [productoEditar]);\n  const onChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setProducto(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const onSubmit = async e => {\n    e.preventDefault();\n    setAlerta({\n      visible: false,\n      message: '',\n      severity: 'success'\n    }); // Ocultar alerta anterior\n    const esEdicion = !!producto.productId;\n    try {\n      if (esEdicion) {\n        await updateProduct(producto.productId, producto);\n        // Reemplazamos alert() por setAlerta() de MUI\n        setAlerta({\n          visible: true,\n          message: \"Producto actualizado con éxito.\",\n          severity: \"success\"\n        });\n      } else {\n        await saveProduct(producto);\n        // Reemplazamos alert() por setAlerta() de MUI\n        setAlerta({\n          visible: true,\n          message: \"Producto registrado con éxito.\",\n          severity: \"success\"\n        });\n      }\n\n      // Limpiar formulario y recargar lista después de un breve retraso para que el usuario vea la alerta\n      setTimeout(() => {\n        setProducto(vacio);\n        setAlerta({\n          visible: false,\n          message: '',\n          severity: 'success'\n        });\n        onGuardado === null || onGuardado === void 0 ? void 0 : onGuardado();\n      }, 1500); // 1.5 segundos\n    } catch (err) {\n      // Manejo de error: mostramos una alerta de error (severity=\"error\")\n      setAlerta({\n        visible: true,\n        message: `Error: ${err.message}`,\n        severity: \"error\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [producto.productId ? \"Editar\" : \"Registrar\", \" Producto\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), alerta.visible && /*#__PURE__*/_jsxDEV(Alert, {\n      icon: alerta.severity === 'success' ? /*#__PURE__*/_jsxDEV(CheckIcon, {\n        fontSize: \"inherit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 59\n      }, this) : undefined,\n      severity: alerta.severity,\n      onClose: () => setAlerta({\n        visible: false,\n        message: '',\n        severity: 'success'\n      }) // Permite cerrar la alerta\n      ,\n      style: {\n        marginBottom: '20px'\n      },\n      children: alerta.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"name\",\n      value: producto.name,\n      onChange: onChange,\n      placeholder: \"Nombre\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"price\",\n      value: producto.price,\n      onChange: onChange,\n      placeholder: \"Precio\",\n      type: \"number\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"stock\",\n      value: producto.stock,\n      onChange: onChange,\n      placeholder: \"Stock\",\n      type: \"number\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"categoryId\",\n      value: producto.categoryId,\n      onChange: onChange,\n      placeholder: \"Categor\\xEDa ID\",\n      type: \"number\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: producto.productId ? \"Actualizar\" : \"Registrar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n_s(ProductForm, \"KHcreEhuuBWDehluIcdQ7dMfkDg=\");\n_c = ProductForm;\nvar _c;\n$RefreshReg$(_c, \"ProductForm\");","map":{"version":3,"names":["useEffect","useState","Alert","CheckIcon","saveProduct","updateProduct","jsxDEV","_jsxDEV","vacio","name","price","stock","categoryId","ProductForm","productoEditar","onGuardado","_s","producto","setProducto","alerta","setAlerta","visible","message","severity","onChange","e","value","target","prev","onSubmit","preventDefault","esEdicion","productId","setTimeout","err","children","fileName","_jsxFileName","lineNumber","columnNumber","icon","fontSize","undefined","onClose","style","marginBottom","placeholder","type","_c","$RefreshReg$"],"sources":["D:/Rei/Reis11/CursoWebIntegrador/frontend/src/components/ProductForm.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n// 1. Importar los componentes de Material-UI\r\nimport Alert from '@mui/material/Alert';\r\nimport CheckIcon from '@mui/icons-material/Check';\r\n\r\nimport { saveProduct, updateProduct } from \"../services/productService\";\r\n\r\nconst vacio = { name: \"\", price: \"\", stock: \"\", categoryId: \"\" };\r\n\r\nexport default function ProductForm({ productoEditar, onGuardado }) {\r\n    const [producto, setProducto] = useState(vacio);\r\n    // 2. Estado para controlar la alerta (mensaje y tipo)\r\n    const [alerta, setAlerta] = useState({ visible: false, message: '', severity: 'success' });\r\n\r\n    useEffect(() => {\r\n        if (productoEditar) setProducto(productoEditar);\r\n        else setProducto(vacio);\r\n        // Ocultar alerta al cambiar de producto\r\n        setAlerta({ visible: false, message: '', severity: 'success' }); \r\n    }, [productoEditar]);\r\n\r\n    const onChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setProducto((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setAlerta({ visible: false, message: '', severity: 'success' }); // Ocultar alerta anterior\r\n        const esEdicion = !!producto.productId;\r\n        \r\n        try {\r\n            if (esEdicion) {\r\n                await updateProduct(producto.productId, producto);\r\n                // Reemplazamos alert() por setAlerta() de MUI\r\n                setAlerta({ visible: true, message: \"Producto actualizado con éxito.\", severity: \"success\" });\r\n            } else {\r\n                await saveProduct(producto);\r\n                // Reemplazamos alert() por setAlerta() de MUI\r\n                setAlerta({ visible: true, message: \"Producto registrado con éxito.\", severity: \"success\" });\r\n            }\r\n            \r\n            // Limpiar formulario y recargar lista después de un breve retraso para que el usuario vea la alerta\r\n            setTimeout(() => {\r\n                setProducto(vacio);\r\n                setAlerta({ visible: false, message: '', severity: 'success' });\r\n                onGuardado?.();\r\n            }, 1500); // 1.5 segundos\r\n\r\n        } catch (err) {\r\n            // Manejo de error: mostramos una alerta de error (severity=\"error\")\r\n            setAlerta({ visible: true, message: `Error: ${err.message}`, severity: \"error\" });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <h3>{producto.productId ? \"Editar\" : \"Registrar\"} Producto</h3>\r\n\r\n            {/* 3. Mostrar la alerta condicionalmente */}\r\n            {alerta.visible && (\r\n                <Alert \r\n                    icon={alerta.severity === 'success' ? <CheckIcon fontSize=\"inherit\" /> : undefined} \r\n                    severity={alerta.severity}\r\n                    onClose={() => setAlerta({ visible: false, message: '', severity: 'success' })} // Permite cerrar la alerta\r\n                    style={{ marginBottom: '20px' }}\r\n                >\r\n                    {alerta.message}\r\n                </Alert>\r\n            )}\r\n\r\n            <input name=\"name\" value={producto.name} onChange={onChange} placeholder=\"Nombre\" />\r\n            <input name=\"price\" value={producto.price} onChange={onChange} placeholder=\"Precio\" type=\"number\" />\r\n            <input name=\"stock\" value={producto.stock} onChange={onChange} placeholder=\"Stock\" type=\"number\" />\r\n            <input name=\"categoryId\" value={producto.categoryId} onChange={onChange} placeholder=\"Categoría ID\"\r\n                type=\"number\" />\r\n            <button type=\"submit\">{producto.productId ? \"Actualizar\" : \"Registrar\"}</button>\r\n            \r\n        </form>\r\n    );\r\n}"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C;AACA,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,SAAS,MAAM,2BAA2B;AAEjD,SAASC,WAAW,EAAEC,aAAa,QAAQ,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExE,MAAMC,KAAK,GAAG;EAAEC,IAAI,EAAE,EAAE;EAAEC,KAAK,EAAE,EAAE;EAAEC,KAAK,EAAE,EAAE;EAAEC,UAAU,EAAE;AAAG,CAAC;AAEhE,eAAe,SAASC,WAAWA,CAAC;EAAEC,cAAc;EAAEC;AAAW,CAAC,EAAE;EAAAC,EAAA;EAChE,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAACO,KAAK,CAAC;EAC/C;EACA,MAAM,CAACW,MAAM,EAAEC,SAAS,CAAC,GAAGnB,QAAQ,CAAC;IAAEoB,OAAO,EAAE,KAAK;IAAEC,OAAO,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAU,CAAC,CAAC;EAE1FvB,SAAS,CAAC,MAAM;IACZ,IAAIc,cAAc,EAAEI,WAAW,CAACJ,cAAc,CAAC,CAAC,KAC3CI,WAAW,CAACV,KAAK,CAAC;IACvB;IACAY,SAAS,CAAC;MAAEC,OAAO,EAAE,KAAK;MAAEC,OAAO,EAAE,EAAE;MAAEC,QAAQ,EAAE;IAAU,CAAC,CAAC;EACnE,CAAC,EAAE,CAACT,cAAc,CAAC,CAAC;EAEpB,MAAMU,QAAQ,GAAIC,CAAC,IAAK;IACpB,MAAM;MAAEhB,IAAI;MAAEiB;IAAM,CAAC,GAAGD,CAAC,CAACE,MAAM;IAChCT,WAAW,CAAEU,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACnB,IAAI,GAAGiB;IAAM,CAAC,CAAC,CAAC;EACvD,CAAC;EAED,MAAMG,QAAQ,GAAG,MAAOJ,CAAC,IAAK;IAC1BA,CAAC,CAACK,cAAc,CAAC,CAAC;IAClBV,SAAS,CAAC;MAAEC,OAAO,EAAE,KAAK;MAAEC,OAAO,EAAE,EAAE;MAAEC,QAAQ,EAAE;IAAU,CAAC,CAAC,CAAC,CAAC;IACjE,MAAMQ,SAAS,GAAG,CAAC,CAACd,QAAQ,CAACe,SAAS;IAEtC,IAAI;MACA,IAAID,SAAS,EAAE;QACX,MAAM1B,aAAa,CAACY,QAAQ,CAACe,SAAS,EAAEf,QAAQ,CAAC;QACjD;QACAG,SAAS,CAAC;UAAEC,OAAO,EAAE,IAAI;UAAEC,OAAO,EAAE,iCAAiC;UAAEC,QAAQ,EAAE;QAAU,CAAC,CAAC;MACjG,CAAC,MAAM;QACH,MAAMnB,WAAW,CAACa,QAAQ,CAAC;QAC3B;QACAG,SAAS,CAAC;UAAEC,OAAO,EAAE,IAAI;UAAEC,OAAO,EAAE,gCAAgC;UAAEC,QAAQ,EAAE;QAAU,CAAC,CAAC;MAChG;;MAEA;MACAU,UAAU,CAAC,MAAM;QACbf,WAAW,CAACV,KAAK,CAAC;QAClBY,SAAS,CAAC;UAAEC,OAAO,EAAE,KAAK;UAAEC,OAAO,EAAE,EAAE;UAAEC,QAAQ,EAAE;QAAU,CAAC,CAAC;QAC/DR,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAG,CAAC;MAClB,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IAEd,CAAC,CAAC,OAAOmB,GAAG,EAAE;MACV;MACAd,SAAS,CAAC;QAAEC,OAAO,EAAE,IAAI;QAAEC,OAAO,EAAE,UAAUY,GAAG,CAACZ,OAAO,EAAE;QAAEC,QAAQ,EAAE;MAAQ,CAAC,CAAC;IACrF;EACJ,CAAC;EAED,oBACIhB,OAAA;IAAMsB,QAAQ,EAAEA,QAAS;IAAAM,QAAA,gBACrB5B,OAAA;MAAA4B,QAAA,GAAKlB,QAAQ,CAACe,SAAS,GAAG,QAAQ,GAAG,WAAW,EAAC,WAAS;IAAA;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAG9DpB,MAAM,CAACE,OAAO,iBACXd,OAAA,CAACL,KAAK;MACFsC,IAAI,EAAErB,MAAM,CAACI,QAAQ,KAAK,SAAS,gBAAGhB,OAAA,CAACJ,SAAS;QAACsC,QAAQ,EAAC;MAAS;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GAAGG,SAAU;MACnFnB,QAAQ,EAAEJ,MAAM,CAACI,QAAS;MAC1BoB,OAAO,EAAEA,CAAA,KAAMvB,SAAS,CAAC;QAAEC,OAAO,EAAE,KAAK;QAAEC,OAAO,EAAE,EAAE;QAAEC,QAAQ,EAAE;MAAU,CAAC,CAAE,CAAC;MAAA;MAChFqB,KAAK,EAAE;QAAEC,YAAY,EAAE;MAAO,CAAE;MAAAV,QAAA,EAE/BhB,MAAM,CAACG;IAAO;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACZ,CACV,eAEDhC,OAAA;MAAOE,IAAI,EAAC,MAAM;MAACiB,KAAK,EAAET,QAAQ,CAACR,IAAK;MAACe,QAAQ,EAAEA,QAAS;MAACsB,WAAW,EAAC;IAAQ;MAAAV,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpFhC,OAAA;MAAOE,IAAI,EAAC,OAAO;MAACiB,KAAK,EAAET,QAAQ,CAACP,KAAM;MAACc,QAAQ,EAAEA,QAAS;MAACsB,WAAW,EAAC,QAAQ;MAACC,IAAI,EAAC;IAAQ;MAAAX,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpGhC,OAAA;MAAOE,IAAI,EAAC,OAAO;MAACiB,KAAK,EAAET,QAAQ,CAACN,KAAM;MAACa,QAAQ,EAAEA,QAAS;MAACsB,WAAW,EAAC,OAAO;MAACC,IAAI,EAAC;IAAQ;MAAAX,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACnGhC,OAAA;MAAOE,IAAI,EAAC,YAAY;MAACiB,KAAK,EAAET,QAAQ,CAACL,UAAW;MAACY,QAAQ,EAAEA,QAAS;MAACsB,WAAW,EAAC,iBAAc;MAC/FC,IAAI,EAAC;IAAQ;MAAAX,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpBhC,OAAA;MAAQwC,IAAI,EAAC,QAAQ;MAAAZ,QAAA,EAAElB,QAAQ,CAACe,SAAS,GAAG,YAAY,GAAG;IAAW;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAS,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAE9E,CAAC;AAEf;AAACvB,EAAA,CAvEuBH,WAAW;AAAAmC,EAAA,GAAXnC,WAAW;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}